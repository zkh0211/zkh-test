'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});

/**
 * Extends a DOM `selection` to a given `el` and `offset`.
 *
 * COMPAT: In IE11, `selection.extend` doesn't exist natively, so we have to
 * polyfill it with this. (2017/09/06)
 *
 * https://gist.github.com/tyler-johnson/0a3e8818de3f115b2a2dc47468ac0099
 *
 * @param {Selection} selection
 * @param {Element} el
 * @param {Number} offset
 * @return {Selection}
 */

function extendSelection(selection, el, offset) {
  // Use native method whenever possible.
  if (typeof selection.extend === 'function') {
    return selection.extend(el, offset);
  }

  var range = document.createRange();
  var anchor = document.createRange();
  var focus = document.createRange();
  anchor.setStart(selection.anchorNode, selection.anchorOffset);
  focus.setStart(el, offset);

  var v = focus.compareBoundaryPoints(window.Range.START_TO_START, anchor);

  // If the focus is after the anchor...
  if (v >= 0) {
    range.setStart(selection.anchorNode, selection.anchorOffset);
    range.setEnd(el, offset);
  }

  // Otherwise, if the anchor if after the focus...
  else {
      range.setStart(el, offset);
      range.setEnd(selection.anchorNode, selection.anchorOffset);
    }

  selection.removeAllRanges();
  selection.addRange(range);
  return selection;
}

/**
 * Export.
 *
 * @type {Function}
 */

exports.default = extendSelection;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy91dGlscy9leHRlbmQtc2VsZWN0aW9uLmpzIl0sIm5hbWVzIjpbImV4dGVuZFNlbGVjdGlvbiIsInNlbGVjdGlvbiIsImVsIiwib2Zmc2V0IiwiZXh0ZW5kIiwicmFuZ2UiLCJkb2N1bWVudCIsImNyZWF0ZVJhbmdlIiwiYW5jaG9yIiwiZm9jdXMiLCJzZXRTdGFydCIsImFuY2hvck5vZGUiLCJhbmNob3JPZmZzZXQiLCJ2IiwiY29tcGFyZUJvdW5kYXJ5UG9pbnRzIiwid2luZG93IiwiUmFuZ2UiLCJTVEFSVF9UT19TVEFSVCIsInNldEVuZCIsInJlbW92ZUFsbFJhbmdlcyIsImFkZFJhbmdlIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFDQTs7Ozs7Ozs7Ozs7Ozs7QUFjQSxTQUFTQSxlQUFULENBQXlCQyxTQUF6QixFQUFvQ0MsRUFBcEMsRUFBd0NDLE1BQXhDLEVBQWdEO0FBQzlDO0FBQ0EsTUFBSSxPQUFPRixVQUFVRyxNQUFqQixLQUE0QixVQUFoQyxFQUE0QztBQUMxQyxXQUFPSCxVQUFVRyxNQUFWLENBQWlCRixFQUFqQixFQUFxQkMsTUFBckIsQ0FBUDtBQUNEOztBQUVELE1BQU1FLFFBQVFDLFNBQVNDLFdBQVQsRUFBZDtBQUNBLE1BQU1DLFNBQVNGLFNBQVNDLFdBQVQsRUFBZjtBQUNBLE1BQU1FLFFBQVFILFNBQVNDLFdBQVQsRUFBZDtBQUNBQyxTQUFPRSxRQUFQLENBQWdCVCxVQUFVVSxVQUExQixFQUFzQ1YsVUFBVVcsWUFBaEQ7QUFDQUgsUUFBTUMsUUFBTixDQUFlUixFQUFmLEVBQW1CQyxNQUFuQjs7QUFFQSxNQUFNVSxJQUFJSixNQUFNSyxxQkFBTixDQUE0QkMsT0FBT0MsS0FBUCxDQUFhQyxjQUF6QyxFQUF5RFQsTUFBekQsQ0FBVjs7QUFFQTtBQUNBLE1BQUlLLEtBQUssQ0FBVCxFQUFZO0FBQ1ZSLFVBQU1LLFFBQU4sQ0FBZVQsVUFBVVUsVUFBekIsRUFBcUNWLFVBQVVXLFlBQS9DO0FBQ0FQLFVBQU1hLE1BQU4sQ0FBYWhCLEVBQWIsRUFBaUJDLE1BQWpCO0FBQ0Q7O0FBRUQ7QUFMQSxPQU1LO0FBQ0hFLFlBQU1LLFFBQU4sQ0FBZVIsRUFBZixFQUFtQkMsTUFBbkI7QUFDQUUsWUFBTWEsTUFBTixDQUFhakIsVUFBVVUsVUFBdkIsRUFBbUNWLFVBQVVXLFlBQTdDO0FBQ0Q7O0FBRURYLFlBQVVrQixlQUFWO0FBQ0FsQixZQUFVbUIsUUFBVixDQUFtQmYsS0FBbkI7QUFDQSxTQUFPSixTQUFQO0FBQ0Q7O0FBRUQ7Ozs7OztrQkFNZUQsZSIsImZpbGUiOiJleHRlbmQtc2VsZWN0aW9uLmpzIiwic291cmNlc0NvbnRlbnQiOlsiXG4vKipcbiAqIEV4dGVuZHMgYSBET00gYHNlbGVjdGlvbmAgdG8gYSBnaXZlbiBgZWxgIGFuZCBgb2Zmc2V0YC5cbiAqXG4gKiBDT01QQVQ6IEluIElFMTEsIGBzZWxlY3Rpb24uZXh0ZW5kYCBkb2Vzbid0IGV4aXN0IG5hdGl2ZWx5LCBzbyB3ZSBoYXZlIHRvXG4gKiBwb2x5ZmlsbCBpdCB3aXRoIHRoaXMuICgyMDE3LzA5LzA2KVxuICpcbiAqIGh0dHBzOi8vZ2lzdC5naXRodWIuY29tL3R5bGVyLWpvaG5zb24vMGEzZTg4MThkZTNmMTE1YjJhMmRjNDc0NjhhYzAwOTlcbiAqXG4gKiBAcGFyYW0ge1NlbGVjdGlvbn0gc2VsZWN0aW9uXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gKiBAcGFyYW0ge051bWJlcn0gb2Zmc2V0XG4gKiBAcmV0dXJuIHtTZWxlY3Rpb259XG4gKi9cblxuZnVuY3Rpb24gZXh0ZW5kU2VsZWN0aW9uKHNlbGVjdGlvbiwgZWwsIG9mZnNldCkge1xuICAvLyBVc2UgbmF0aXZlIG1ldGhvZCB3aGVuZXZlciBwb3NzaWJsZS5cbiAgaWYgKHR5cGVvZiBzZWxlY3Rpb24uZXh0ZW5kID09PSAnZnVuY3Rpb24nKSB7XG4gICAgcmV0dXJuIHNlbGVjdGlvbi5leHRlbmQoZWwsIG9mZnNldClcbiAgfVxuXG4gIGNvbnN0IHJhbmdlID0gZG9jdW1lbnQuY3JlYXRlUmFuZ2UoKVxuICBjb25zdCBhbmNob3IgPSBkb2N1bWVudC5jcmVhdGVSYW5nZSgpXG4gIGNvbnN0IGZvY3VzID0gZG9jdW1lbnQuY3JlYXRlUmFuZ2UoKVxuICBhbmNob3Iuc2V0U3RhcnQoc2VsZWN0aW9uLmFuY2hvck5vZGUsIHNlbGVjdGlvbi5hbmNob3JPZmZzZXQpXG4gIGZvY3VzLnNldFN0YXJ0KGVsLCBvZmZzZXQpXG5cbiAgY29uc3QgdiA9IGZvY3VzLmNvbXBhcmVCb3VuZGFyeVBvaW50cyh3aW5kb3cuUmFuZ2UuU1RBUlRfVE9fU1RBUlQsIGFuY2hvcilcblxuICAvLyBJZiB0aGUgZm9jdXMgaXMgYWZ0ZXIgdGhlIGFuY2hvci4uLlxuICBpZiAodiA+PSAwKSB7XG4gICAgcmFuZ2Uuc2V0U3RhcnQoc2VsZWN0aW9uLmFuY2hvck5vZGUsIHNlbGVjdGlvbi5hbmNob3JPZmZzZXQpXG4gICAgcmFuZ2Uuc2V0RW5kKGVsLCBvZmZzZXQpXG4gIH1cblxuICAvLyBPdGhlcndpc2UsIGlmIHRoZSBhbmNob3IgaWYgYWZ0ZXIgdGhlIGZvY3VzLi4uXG4gIGVsc2Uge1xuICAgIHJhbmdlLnNldFN0YXJ0KGVsLCBvZmZzZXQpXG4gICAgcmFuZ2Uuc2V0RW5kKHNlbGVjdGlvbi5hbmNob3JOb2RlLCBzZWxlY3Rpb24uYW5jaG9yT2Zmc2V0KVxuICB9XG5cbiAgc2VsZWN0aW9uLnJlbW92ZUFsbFJhbmdlcygpXG4gIHNlbGVjdGlvbi5hZGRSYW5nZShyYW5nZSlcbiAgcmV0dXJuIHNlbGVjdGlvblxufVxuXG4vKipcbiAqIEV4cG9ydC5cbiAqXG4gKiBAdHlwZSB7RnVuY3Rpb259XG4gKi9cblxuZXhwb3J0IGRlZmF1bHQgZXh0ZW5kU2VsZWN0aW9uXG4iXX0=